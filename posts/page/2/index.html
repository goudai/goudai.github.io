<!doctype html>
<html lang="zh-CN">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <meta name="referrer" content="no-referrer-when-downgrade">
    

    <title>Posts | 青木的博客</title>
    <meta property="og:title" content="Posts - 青木的博客">
    <meta property="og:type" content="article">
        
        
    <meta name="Keywords" content="golang,go语言,go语言笔记,青木,java,博客,项目管理,软件架构">
    <meta name="description" content="Posts">
        
    <meta name="author" content="青木">
    <meta property="og:url" content="https://goudai.github.io/posts/">
    <link rel="shortcut icon" href='/favicon.ico'  type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <link rel="alternate" type="application/rss+xml" href="https://goudai.github.io/posts/index.xml" title="青木的博客" />
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
</head>

<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://goudai.github.io/">
                        青木的博客
                    </a>
                
                <p class="description">道可道，非常道；名可名，非常名。</p>
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="current" href="https://goudai.github.io/">首页</a>
                    
                    <a  href="https://goudai.github.io/archives/" title="归档">归档</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://goudai.github.io/posts/Run-Spring-Cloud-Gateway-on-kubernetes/" title="在kubernetes上运行Spring Cloud Gateway（一）">在kubernetes上运行Spring Cloud Gateway（一）</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2019年8月6日
        </date>
        
        <div class="post-content">
            <h1 id="前言">前言</h1>
<p>[https://github.com/spring-cloud/spring-cloud-gateway](Spring Cloud Gateway)是Spring Cloud官方推出的一个网关项目，主要是基于<a href="https://github.com/reactor/reactor-netty">reactor-netty</a>实现。网关在微服务系统主要充当了一个入口&quot;门&quot;的作用，所有的IN/OUT都需要经过这一道门，才能访问到微服务池子中的功能api。
这样的设计方便了我们对业务功能的保护api资源的保护，我们可以在这里灵活的控制对外开放的API集合，而这些API集合就构成了我们的<code>&quot;系统&quot;</code>。</p>
<p>我们还可以方便的在这里完成鉴权，如果是非法用户之间在这里干掉，从而避免了对业务的调用。</p>
<p>还可以对参数进行转换，比如从调用者带过来的是一个<code>JWT</code>我们可以解析这个Token，得到诸如<code>currentUserId</code>，<code>租户id</code>，<code>username</code>，等等一些列参数后，再往后传递到具体的微服务上。</p>
<p>这里只是一些常用功能的列举，本质上来说呢，他就是一组Filters，我们可以通过扩展它的Filter，快速完成业务所需要的功能效果。</p>……
        </div>
        <p class="readmore"><a href="https://goudai.github.io/posts/Run-Spring-Cloud-Gateway-on-kubernetes/">阅读全文</a></p>
    </article>
    
    
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://goudai.github.io/posts/Hands-on-modification-of-the-validity-period-of-the-kubeam-generation-certificate/" title="动手修改kubeam生成证书有效期为100年">动手修改kubeam生成证书有效期为100年</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2019年8月1日
        </date>
        
        <div class="post-content">
            <p>这里我们已v1.14.4的源代码为基础。
首先需要下载<a href="https://github.com/kubernetes/kubernetes/archive/v1.14.4.tar.gz">kubernetesv1.14.4</a>到本地，并导入到goland，方便我们进行改。</p>……
        </div>
        <p class="readmore"><a href="https://goudai.github.io/posts/Hands-on-modification-of-the-validity-period-of-the-kubeam-generation-certificate/">阅读全文</a></p>
    </article>
    
    
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://goudai.github.io/posts/Deploy-Elasticsearch-Cluster-on-kubernetes/" title="在kubernetes上运行elasticsearch集群">在kubernetes上运行elasticsearch集群</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2019年8月1日
        </date>
        
        <div class="post-content">
            <p>像elasticsearch这种应用属于重度依赖IO，依赖磁盘，对磁盘敏感的应用，如果采用分布式文件系统（NFS/GlusterFS等）来进行数据的存储，对ES的性能会造成很大的影响。
elasticsearch是具有状态的应用，我们可以采用两种方式部署，STS+LocalPV 或者是Deployment+NodeSelector+HostPath 的方式进行部署，本质上来说两者区别不大。</p>……
        </div>
        <p class="readmore"><a href="https://goudai.github.io/posts/Deploy-Elasticsearch-Cluster-on-kubernetes/">阅读全文</a></p>
    </article>
    
    
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://goudai.github.io/posts/Deploy-distributed-log-system-EFK-on-kubernetes/" title="在kubernetes上部署分布式日志系统EFK（7.x)">在kubernetes上部署分布式日志系统EFK（7.x)</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2019年8月1日
        </date>
        
        <div class="post-content">
            ……
        </div>
        <p class="readmore"><a href="https://goudai.github.io/posts/Deploy-distributed-log-system-EFK-on-kubernetes/">阅读全文</a></p>
    </article>
    
    
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://goudai.github.io/posts/Deploy-gitlab-server/" title="搭建代码仓库gitlab服务器">搭建代码仓库gitlab服务器</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2019年7月22日
        </date>
        
        <div class="post-content">
            <h1 id="前言">前言</h1>
<p>本章节讨论</p>
<ol>
<li>我们的git服务器gitlab应该部署在企业内网，还是部署在公网如阿里云上，各自利弊。</li>
<li>我们的代码仓库如何划分比较好。</li>
</ol>……
        </div>
        <p class="readmore"><a href="https://goudai.github.io/posts/Deploy-gitlab-server/">阅读全文</a></p>
    </article>
    
    
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://goudai.github.io/posts/Java-code-layering/" title="Java code layering">Java code layering</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2019年7月20日
        </date>
        
        <div class="post-content">
            <p>一下是一个典型的java微服务项目的代码调用结构，分层次的目的在于<code>解耦合</code>，<code>内聚变化</code>，<code>减少重复代码</code>。</p>
<p>为了达到解开的目的我们会采用<code>Pojos</code>来对每层之间的输入输出进行隔离，以期望，如，对视图的改动，格式化，等等不会对业务产生太大影响，为此我们会产生以下对象：</p>
<ul>
<li>
<p>VO（View Object） 视图对象，他用于展示业务数据的封装格式，常常和视图一一对应。</p>
</li>
<li>
<p>QMO（Query Model Object） 查询模型对象。顾名思义，用于查询结构的封装载体</p>
</li>
<li>
<p>DTO（Data Transfer Object） DTO对象，即一个数据载体的封装格式。</p>
</li>
<li>
<p>DO（Domain Object）领域模型对象，也叫Entity实体对象，这里是我们对业务的模型的抽象模型，映射现实业务中的实体。</p>
</li>
<li>
<p>PO（Persistent Object） PO对象，即持久化对象，用户解耦存储和业务直接的关系。实际开发中有了ORM之后，可直接用DO/Entity代替。和存储的（表结构，Document）等格式一一对应。</p>
</li>
</ul>
<p>有了这些对象的基本概念我们就可以对代码结构进行分层，完整的结构如图：</p>……
        </div>
        <p class="readmore"><a href="https://goudai.github.io/posts/Java-code-layering/">阅读全文</a></p>
    </article>
    
    
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://goudai.github.io/posts/Deploy-kubernetes-network-plugin/" title="部署kubernetes相关插件">部署kubernetes相关插件</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2019年6月1日
        </date>
        
        <div class="post-content">
            <h1 id="前言">前言</h1>
<p>在<a href="https://qingmu.io/2018/12/20/Deploy-a-highly-available-cluster-with-kubeadm/">上一篇</a>中我们完成了kubernetes的高可用集群的搭建，但我们搭建出来的集群状态均显示都是<code>Not Ready</code>，这背后的原因是由于我们的
集群网络并没打通，本文我们将接着上文继续往下中，完成我们的集群网络插件的安装与部署。</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>➜  kubectl get cs
</span></span><span style="display:flex;"><span>NAME                 STATUS    MESSAGE             ERROR
</span></span><span style="display:flex;"><span>controller-manager   Healthy   ok                  
</span></span><span style="display:flex;"><span>scheduler            Healthy   ok                  
</span></span><span style="display:flex;"><span>etcd-1               Healthy   {&#34;health&#34;:&#34;true&#34;}   
</span></span><span style="display:flex;"><span>etcd-2               Healthy   {&#34;health&#34;:&#34;true&#34;}   
</span></span><span style="display:flex;"><span>etcd-0               Healthy   {&#34;health&#34;:&#34;true&#34;}  
</span></span></code></pre></td></tr></table>
</div>
</div>……
        </div>
        <p class="readmore"><a href="https://goudai.github.io/posts/Deploy-kubernetes-network-plugin/">阅读全文</a></p>
    </article>
    
    
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://goudai.github.io/posts/Deploy-a-highly-available-cluster-with-kubeadm/" title="部署高可用kubernetes">部署高可用kubernetes</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2019年5月17日
        </date>
        
        <div class="post-content">
            <h1 id="kubernetes的基本概念">kubernetes的基本概念</h1>
<h1 id="font-colorred写在前面的话font"><!-- raw HTML omitted -->写在前面的话<!-- raw HTML omitted --></h1>
<p>整个安装过程中尽量不要出现写死的IP的情况出现，尽量全部使用域名代替IP。
网上大量的人使用KeepAlive+VIP的形式完成高可用，这个方式有两个不好的地方：
其一，受限于使用者的网络，无法适用于SDN网络，比如Aliyun的VPC。
其二，虽然是高可用的，但是流量还是单点的，所有node的的网络I/O都会高度集中于一台机器上（VIP)。
本文的高可用可通用于任何云上的SDN环境和自建机房环境，如阿里云的VPC环境中。</p>……
        </div>
        <p class="readmore"><a href="https://goudai.github.io/posts/Deploy-a-highly-available-cluster-with-kubeadm/">阅读全文</a></p>
    </article>
    
    
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://goudai.github.io/posts/HAProxy-Spring-Gateway-Connection-reset-by-peer/" title="Spring Gateway syscall:read(..) Connection reset by peer">Spring Gateway syscall:read(..) Connection reset by peer</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2019年1月10日
        </date>
        
        <div class="post-content">
            <h1 id="前言">前言</h1>
<p>最近花了一段时间完成了从zuul迁移到<code>Spring Cloud Gateway</code>的工作，记录一下遇到的一个问题。</p>……
        </div>
        <p class="readmore"><a href="https://goudai.github.io/posts/HAProxy-Spring-Gateway-Connection-reset-by-peer/">阅读全文</a></p>
    </article>
    
    
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://goudai.github.io/posts/How-to-securely-limit-JVM-resources-in-a-container/" title="容器中的JVM资源该如何被安全的限制？">容器中的JVM资源该如何被安全的限制？</a>
            </h1>
        </header>
        <date class="post-meta meta-date">
            2018年12月17日
        </date>
        
        <div class="post-content">
            <h1 id="前言">前言</h1>
<p>Java与Docker的结合，虽然更好的解决了application的封装问题。但也存在着不兼容，比如Java并不能自动的发现Docker设置的内存限制,CPU限制。
<!-- raw HTML omitted -->这将导致JVM不能稳定服务业务！<!-- raw HTML omitted -->容器会杀死你JVM进程，而健康检查又将拉起你的JVM进程，进而导致你监控你的pod一天重启次数甚至能达到几百次。 <!-- raw HTML omitted -->
我们希望当Java进程运行在容器中时，java能够自动识别到容器限制，获取到正确的内存和CPU信息，而不用每次都需要在kubernetes的yaml描述文件中显示的配置完容器，还需要配置JVM参数。<!-- raw HTML omitted -->
使用JVM MaxRAM参数或者解锁实验特性的JVM参数，我们可以解决这个问题。<!-- raw HTML omitted --></p>……
        </div>
        <p class="readmore"><a href="https://goudai.github.io/posts/How-to-securely-limit-JVM-resources-in-a-container/">阅读全文</a></p>
    </article>
    
    
    



<ol class="page-navigator">
    
    <li class="prev">
        <a href="https://goudai.github.io/posts/">上一页</a>
    </li>
    

    
    <li >
        <a href="https://goudai.github.io/posts/">1</a>
    </li>
    
    <li  class="current">
        <a href="https://goudai.github.io/posts/page/2/">2</a>
    </li>
    
    <li >
        <a href="https://goudai.github.io/posts/page/3/">3</a>
    </li>
    

    
    <li class="next">
        <a href="https://goudai.github.io/posts/page/3/">下一页</a>
    </li>
    
</ol>



</div>

                    <footer id="footer">
    <div>
        &copy; 2022 <a href="https://goudai.github.io/">青木的博客 By 青木</a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>



        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>



<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>
    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://goudai.github.io/search' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://goudai.github.io/">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://goudai.github.io/posts/Spring-Boot-Operator-User-Guide/" title="使用Spring Boot Operator部署SpringBoot到K8S">使用Spring Boot Operator部署SpringBoot到K8S</a>
    </li>
    
    <li>
        <a href="https://goudai.github.io/posts/Monitor-ETCD/" title="Prometheus Operator监控ETCD">Prometheus Operator监控ETCD</a>
    </li>
    
    <li>
        <a href="https://goudai.github.io/posts/Monitor-springboot-microservices/" title="Prometheus Operator监控SpringCloud">Prometheus Operator监控SpringCloud</a>
    </li>
    
    <li>
        <a href="https://goudai.github.io/posts/Customize-your-kube-prometheus/" title="优雅的使用Prometheus Operator">优雅的使用Prometheus Operator</a>
    </li>
    
    <li>
        <a href="https://goudai.github.io/posts/Run-the-business-service-to-complete-the-service-call-using-Feign/" title="部署业务并使用Feign进行服务间调用（附带一部分源码分析）">部署业务并使用Feign进行服务间调用（附带一部分源码分析）</a>
    </li>
    
    <li>
        <a href="https://goudai.github.io/posts/Run-mysql-on-kubernetes/" title="从部署mysql聊一聊有状态服务和PV及PVC">从部署mysql聊一聊有状态服务和PV及PVC</a>
    </li>
    
    <li>
        <a href="https://goudai.github.io/posts/Run-distributed-trace-zipkin-in-kubernetes/" title="在kubernetes运行分布式追踪zipkin">在kubernetes运行分布式追踪zipkin</a>
    </li>
    
    <li>
        <a href="https://goudai.github.io/posts/Run-the-configuration-hub-cluster-on-kubernetes/" title="在kubernetes上运行SpringCloud配置中心">在kubernetes上运行SpringCloud配置中心</a>
    </li>
    
    <li>
        <a href="https://goudai.github.io/posts/Run-eureka-cluster-on-kubernetes/" title="在kubernetes上运行eureka集群">在kubernetes上运行eureka集群</a>
    </li>
    
    <li>
        <a href="https://goudai.github.io/posts/Run-Spring-Cloud-Gateway-on-kubernetes-2/" title="在kubernetes上运行Spring Cloud Gateway（二）">在kubernetes上运行Spring Cloud Gateway（二）</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href='/categories/'>分类</a></h3>
<ul class="widget-list">
    
    <li><a href="https://goudai.github.io/categories/%E5%90%8E%E7%AB%AF/">后端 (1)</a></li>
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href='/tags/'>标签</a></h3>
<div class="tagcloud">
    
    <a href="https://goudai.github.io/tags/EFK/">EFK</a>
    
    <a href="https://goudai.github.io/tags/Java/">Java</a>
    
    <a href="https://goudai.github.io/tags/kubernetes/">kubernetes</a>
    
    <a href="https://goudai.github.io/tags/Mysql/">Mysql</a>
    
    <a href="https://goudai.github.io/tags/Prometheus/">Prometheus</a>
    
    <a href="https://goudai.github.io/tags/SpringBoot/">SpringBoot</a>
    
    <a href="https://goudai.github.io/tags/SpringCloud/">SpringCloud</a>
    
    <a href="https://goudai.github.io/tags/SpringGateway/">SpringGateway</a>
    
    <a href="https://goudai.github.io/tags/docker/">docker</a>
    
    <a href="https://goudai.github.io/tags/elasticsearch/">elasticsearch</a>
    
    <a href="https://goudai.github.io/tags/gitlab/">gitlab</a>
    
    <a href="https://goudai.github.io/tags/hpa/">hpa</a>
    
    <a href="https://goudai.github.io/tags/jvm/">jvm</a>
    
    <a href="https://goudai.github.io/tags/kafka/">kafka</a>
    
    <a href="https://goudai.github.io/tags/kubernetes/">kubernetes</a>
    
    <a href="https://goudai.github.io/tags/metrics-server/">metrics-server</a>
    
    <a href="https://goudai.github.io/tags/springclod/">springclod</a>
    
    <a href="https://goudai.github.io/tags/zuul/">zuul</a>
    
    <a href="https://goudai.github.io/tags/%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/">异常处理</a>
    
    <a href="https://goudai.github.io/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/">微服务</a>
    
    <a href="https://goudai.github.io/tags/%E6%BA%90%E7%A0%81/">源码</a>
    
    <a href="https://goudai.github.io/tags/%E7%9B%91%E6%8E%A7/">监控</a>
    
</div>
    </section>

    
<section class="widget">
    <h3 class="widget-title">友情链接</h3>
    <ul class="widget-list">
        
        <li>
            <a target="_blank" href="https://goudai.github.io/" title="青木的博客">青木的博客</a>
        </li>
        
    </ul>
</section>


    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://goudai.github.io/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>